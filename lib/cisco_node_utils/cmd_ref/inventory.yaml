# inventory
---
_template:
  ios_xr:
    get_command: 'show inventory'
    test_get_command: 'show inventory'
  nexus:
    nxapi_structured:
      get_command: 'show inventory'
    test_get_command: 'show inventory | no-more'

all:
  multiple: true
  nxapi_structured:
    get_context: ["TABLE_inv", "ROW_inv"]

chassis:
  nxapi_structured:
    get_context: ["TABLE_inv", "ROW_inv"]
    # TODO: get_context?
    # get_value: {'name': '"Chassis"'}

inventory:
  # TODO: clean this up
  '/N7K/':
    test_get_value: [
    '/.*\nNAME: "(.+)",\s+DESCR: "(.+)"\s+\nPID: (\S+)\s+,\s+VID: (.+) ,\s+SN: (.+)\s+\n/',
    '/.*NAME: "(.+)",\s+DESCR: "(.+)"\s+PID: (\S+)\s+,\s+VID: (.+) ,\s+SN: (.+)\s+\n/'
    ]
  '/N9K/':
    test_get_value: [
    '/.*\nNAME: "(.+)",\s+DESCR: "(.+)"\s+\nPID: (\S+)\s+,\s+VID: (.+) ,\s+SN: (.+)\s+\n/',
    '/.*NAME: "(.+)",\s+DESCR: "(.+)"\s+PID: (\S+)\s+,\s+VID: (.+) ,\s+SN: (.+)\s+\n/'
    ]
  else:
    test_get_value: [
    '/.*\nNAME: "(.+)",\s+DESCR: "(.+)"\nPID: (\S+)\s+, VID: (.+) , SN: (.+)\n/',
    '/.*\nNAME: "(.+)",\s+DESCR: "(.+)"\nPID: (\S+)\s+, VID: (.+) , SN: (.+)\n/'
    ]

productid:
  ios_xr:
    get_value: '/"Rack 0".*\n.*PID: ([^ ,]+)/'
  nxapi_structured:
    get_context: ["TABLE_inv", "ROW_inv", '0']
    get_value: "productid"

serialnum:
  ios_xr:
    get_value: '/"Rack 0".*\n.*SN: ([^ ,]+)/'
  nxapi_structured:
    get_context: ["TABLE_inv", "ROW_inv", '0']
    get_value: "serialnum"

versionid:
  ios_xr:
    get_value: '/"Rack 0".*\n.*VID: ([^ ,]+)/'
  nxapi_structured:
    get_context: ["TABLE_inv", "ROW_inv", '0']
    get_value: "vendorid"
