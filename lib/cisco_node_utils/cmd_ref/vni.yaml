# vni
---
all_vnis:
  get_command: "show vni"
  get_value: '/^(\d+)\s/'

bridge_domain:
  get_command: "show vni"
  get_value: '/^%d\s+\S+\s+(\d+)/'
  set_context:
    - "bridge-domain %d"
  set_value: "%s member vni %d"
  default_value: ~

bridge_domain_activate:
  set_value: "%s system bridge-domain add %d"

create:
  set_value: "vni %s"

destroy:
  set_value: "no vni %s"

encap_dot1q:
  set_context:
    - "encapsulation profile vni %s"
  set_value: "%s dot1q %s vni %s"
  default_value: ~

feature:
  get_command: "show feature"
  get_value: '/^vni\s+\d+\s+(\S+)/'
  set_value: "%s feature vni"

feature_n9k:
  get_command: " show running | i ^feature"
  get_value: '/^feature vn-segment-vlan-based$/'
  set_value: "<state> feature vn-segment-vlan-based"

feature_nv_overlay:
  get_command: " show running | i ^feature"
  get_value: '/^feature nv overlay$/'
  set_value: "<state> feature nv overlay"

mapped_vlan:
  get_command: 'show running vlan'
  context: ['vlan <vlan>']
  get_value: '/^vn-segment (\d+)$/'
  set_value:  '<state> vn-segment <vni>'
  default_value: ""

shutdown:
  get_command: "show vni"
  get_value: '/^%d\s+(\S+)/'
  set_context: ["vni %d"]
  set_value: "%s shutdown"
  default_value: false
